{"mappings":"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","sources":["src/js/watched-library.js","src/js/movie-modal-library.js","src/js/queue-library.js","src/my-library.js"],"sourcesContent":["const refs = {\n  watchedBtn: document.querySelector('.watched-btn'),\n  queueBtn: document.querySelector('.queue-btn'),\n  galleryLibrary: document.querySelector('.container-library'),\n};\n\nrefs.watchedBtn.addEventListener('click', onWatchedLibrary);\n\nexport async function onWatchedLibrary() {\n  refs.watchedBtn.classList.add('btn-active');\n  refs.queueBtn.classList.remove('btn-active');\n  try {\n    const moviesArray = await loadFromLocalStorage('WATCHED-FILM');\n    console.log(moviesArray);\n    if (!moviesArray || !Object.keys(moviesArray).length) {\n      clear();\n      const markupNothing = createMarkupWhenLocalStorageEmpty();\n      refs.galleryLibrary.insertAdjacentHTML('beforeend', markupNothing);\n    } else {\n      clear();\n      const markup = createMoviesCard(moviesArray);\n      refs.galleryLibrary.insertAdjacentHTML('beforeend', markup);\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nexport function createMoviesCard(cards = []) {\n  return cards\n    .map(card => {\n      const { id, title, poster_path, genres, release_date, vote_average } =\n        card;\n      const genresForRender = concatGenres(genres.map(genre => genre.name));\n      return `<li class=\"home-card__link\" id=${id}>\n\t\t</div class = \"home-card__thumb\">\n\t\t<picture class=\"home-card__poster\">\n\t\t\t\t  <source media=\"(min-width:1280px)\"  srcset=\"https://image.tmdb.org/t/p/w500${poster_path}\">\n\t\t\t\t  <source media=\"(min-width:768px)\"  srcset=\"https://image.tmdb.org/t/p/w400${poster_path}\">\n\t\t\t\t  <img class=\"home-card__img\" src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${title}\" loading=\"lazy\">\n\t\t\t  </picture>\n\t\t  \n\t\t  <h2 class='card__title'>${title}</h2>\n\t\t  <p class='card__text' id=${id}>${\n        genresForRender ? genresForRender : '---'\n      } | ${new Date(release_date).getFullYear()}\n        <span class=\"card__rating\">${vote_average.toFixed(1)}</span> </p>\n\t\t</div>\n\t\t  </li>`;\n    })\n    .join('');\n}\nfunction concatGenres(arrOfGenresName) {\n  return arrOfGenresName.reduce((acc, genre, index, arr) => {\n    if (arr.length > 2) {\n      acc = `${arr[0]}, ${arr[1]}, Others`;\n    } else {\n      acc = arr.join(', ');\n    }\n\n    return acc;\n  }, '');\n}\n\nexport function createMarkupWhenLocalStorageEmpty() {\n  return `\n  <li class=\"container-nothing\">\n      <div class=\"container-nothing__content\">\n        <h2 class=\"container-nothing__title\">Your library is empty!</h2>\n        <p class=\"container-nothing__text\">\n          <a\n            title=\"Link to main page\"\n            class=\"container-nothing__link\"\n            href=\"/src/index.html\"\n            >GO TO</a\n          >\n          movie selection.\n        </p>\n      </div>\n    </li>\n    `;\n}\n\nexport function loadFromLocalStorage(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n}\n\nexport function clear() {\n  refs.galleryLibrary.innerHTML = '';\n}\n","import axios from 'axios';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { genres } from './Templates/genres';\nimport { Spinner } from 'spin.js';\nimport { spinner } from './spinner';\n\nconst target = document.getElementById('foo');\n\nconst refs = {\n  modalFilmBackdrop: document.querySelector('[data-modal-film]'),\n  modalFilm: document.querySelector('.modal-film'),\n  cardFilmLibrary: document.querySelector('.container-library'),\n};\n\nrefs.cardFilmLibrary.addEventListener('click', onOpenModalFilm);\n\nrefs.cardFilmLibrary.addEventListener('click', onOpenModalFilm);\nrefs.modalFilmBackdrop.addEventListener('click', onBackdropClick);\n\nfunction onOpenModalFilm(e) {\n  refs.modalFilmBackdrop.classList.remove('is-hidden');\n  refs.modalFilm.classList.remove('is-hidden');\n  document.body.classList.add('no-scroll');\n\n  document.addEventListener('click', onCloseModalFilmByBtn);\n  window.addEventListener('keydown', onCloseEscBtn);\n\n  const idCard = e.target.closest('.home-card__link');\n  //   console.log(idCard.id);\n\n  createMovieCard(idCard.id);\n\n  // fetchMovieById(idCard).then(response => {\n  //   refs.cardFilmLibrary.innerHTML = '';\n  //   return render(response);\n  // });\n  // ------ trailer movie-------\n  // const boxFetchApiMovies = new FetchApiMovies();\n  // boxFetchApiMovies\n  //   .fetchMoviesTrailers(idCard)\n  //   .then(data => {\n  //     console.log(data);\n  //     // перевірка якщо пустий масив\n  //     // показувати картинку\n  //     if (data.results.length === 0) {\n  //       return;\n  //     }\n  //     const picture = document.querySelector('.modal-film-card-wrapper');\n  //     picture.remove();\n  //     const markupTrailer = markupMovieTrailer(data.results[0].key);\n  //     refs.modalFilm.insertAdjacentHTML('afterbegin', markupTrailer);\n  //   })\n  //   .catch(error => console.log(error));\n  // ------------ end treiler movie -------------\n}\n\nasync function createMovieCard(id) {\n  try {\n    spinner.spin(target);\n    const response = await fetchMovieById(id);\n    // console.log(response);\n    refs.modalFilm.innerHTML = '';\n\n    render(response);\n  } catch (error) {\n    console.log(error.message);\n    closeModalFilm();\n    Notify.failure('Sorry, movie not found. Please try again.');\n  } finally {\n    spinner.stop();\n  }\n}\n\nfunction closeModalFilm() {\n  window.removeEventListener('keydown', onCloseEscBtn);\n  document.removeEventListener('click', onCloseModalFilmByBtn);\n  refs.modalFilmBackdrop.classList.add('is-hidden');\n  refs.modalFilm.classList.add('is-hidden');\n  document.body.classList.remove('no-scroll');\n}\n\nfunction onCloseModalFilmByBtn(e) {\n  if (\n    e.target.classList.contains('close-modal__btn-text') ||\n    e.target.classList.contains('close-modal__btn-inner') ||\n    e.target.classList.contains('close-modal__btn-text')\n  ) {\n    closeModalFilm();\n  }\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    closeModalFilm();\n  }\n}\n\nfunction onCloseEscBtn(e) {\n  // console.log(e.code);\n  if (e.code === 'Escape') {\n    closeModalFilm();\n  }\n}\n\nasync function fetchMovieById(idMovie) {\n  try {\n    const response = await axios.get(\n      `https://api.themoviedb.org/3/movie/${idMovie}?api_key=9fae0fdf266213c68361ca578a95b948&language=en-US`\n    );\n    // console.log(response.data);\n\n    return await response.data;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\n// ---Render--\nfunction render(response) {\n  const detailsCard = getModalMovieCardMarkup(response);\n  // console.log(detailsCard);\n  //   getWatchedToLocalStr(response);\n  //   getQueuedToLocalStr(response);\n\n  refs.modalFilm.insertAdjacentHTML('beforeend', detailsCard);\n\n  //   const btnWatchedFilmModalWindowEl = document.querySelector(\n  //     '.modal-window__watched-btn'\n  //   );\n  //   btnWatchedFilmModalWindowEl.addEventListener('click', onClickBtnWatchedFilm);\n  //   const btnQueuedFilmModalWindowEl = document.querySelector(\n  //     '.modal-window__queued-btn'\n  //   );\n  //   btnQueuedFilmModalWindowEl.addEventListener('click', onClickBtnQueuedFilm);\n}\n\n// ------Markup----\n\nconst getModalMovieCardMarkup = ({\n  id,\n  title,\n  original_title,\n  overview,\n  poster_path,\n  vote_average,\n  vote_count,\n  popularity,\n  genres,\n}) => {\n  const genresList = genres.map(genre => genre.name).join(', ');\n\n  // const watchedFilm = localStorage.getItem('WATCHED-FILM');\n  // const watchedFilmsArray = JSON.parse(watchedFilm) || [];\n  // const queuedFilm = localStorage.getItem('QUEUED-FILM');\n  // const queuedFilmsArray = JSON.parse(queuedFilm) || [];\n\n  // const a = String(id);\n\n  // const hasWatchedFilm = watchedFilmsArray.some(value => value === String(id));\n  // console.log(hasWatchedFilm);\n  // console.log(id);\n\n  // console.log(watchedFilmsArray);\n\n  // const hasWatchedFilm = watchedFilmsArray.includes(id);\n  // console.log(hasWatchedFilm);\n  // console.log(id);\n\n  return `\n    <button\n        type=\"button\"\n        class=\"modal-film__close-button close-modal__btn\"\n      >\n      <div class=\"close-modal__btn-inner\">\n      <span class=\"close-modal__btn-text\">Back\n      </span> </div>\n      </button>\n    <div class=\"modal-film__card\"  id=\"${id}\">\n    <div class=\"modal-film-card-wrapper\">\n    <picture class=\"modal-film__img>\n    <source media=\"(min-width:1024px)\" srcset=\"https://image.tmdb.org/t/p/w500${poster_path}\">\n    <source media=\"(min-width:768px)\"  srcset=\"https://image.tmdb.org/t/p/w400${poster_path}\">\n    <img class=\"img-film__poster\" src=\"https://image.tmdb.org/t/p/w300${poster_path}\"  \"alt=\"${title}\" loading=\"lazy\"  >\n  </picture>\n  </div>\n  <div class=\"movie-info\">\n    <h2 class=\"film-title\">${title}</h2>\n    <ul class=\"film-title__list-film\">\n    <li class=\"film-title__item-film\"><p class=\"film-title__value\" >Vote / Votes </p><p class=\"film-title__desc-film\"><span class=\"film-title__vote_average\">${vote_average}</span><span class=\"film-title__slash\">/</span><span class=\"film-title__vote_count\">${vote_count}</span> </p> </li>\n    <li class=\"film-title__item-film\"><p class=\"film-title__value\">Popularity</p><p class=\"film-title__desc-film\">${popularity}</p></li>\n    <li class=\"film-title__item-film\"><p class=\"film-title__value\">Original Title</p><p class=\"film-title__desc-film\">${original_title}</p></li>\n    <li class=\"film-title__item-film\"><p class=\"film-title__value\">Genre</p><p class=\"film-title__desc-film\">${genresList}</p></li>\n    </ul>\n    <h3 class=\"about-title\">About ${original_title}</h3>\n    <p class=\"text-about-movie\">${overview}</p>\n    \n    <ul>\n    <li><button class=\"modal-window__watched-btn\" type=\"button\" data-id=${id}>Add</button></li>\n    <li><button class=\"modal-window__queued-btn\" type=\"button\" data-id=${id}>Add to queue</button></li>\n  </ul>\n    </div>\n  `;\n};\n","import {\n  createMoviesCard,\n  createMarkupWhenLocalStorageEmpty,\n  loadFromLocalStorage,\n  clear,\n} from './watched-library';\n\nconst refs = {\n  watchedBtn: document.querySelector('.watched-btn'),\n  queueBtn: document.querySelector('.queue-btn'),\n  galleryLibrary: document.querySelector('.container-library'),\n};\n\nrefs.queueBtn.addEventListener('click', onQueueLibrary);\n\nexport async function onQueueLibrary() {\n  refs.watchedBtn.classList.remove('btn-active');\n  refs.queueBtn.classList.add('btn-active');\n  try {\n    const moviesArray = await loadFromLocalStorage('QUEUED-FILM');\n    console.log(moviesArray);\n\n    if (!moviesArray || !Object.keys(moviesArray).length) {\n      clear();\n      const markupNothing = createMarkupWhenLocalStorageEmpty();\n      refs.galleryLibrary.insertAdjacentHTML('beforeend', markupNothing);\n    } else {\n      clear();\n      const markup = createMoviesCard(moviesArray);\n      refs.galleryLibrary.insertAdjacentHTML('beforeend', markup);\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n","import './js/watched-library';\n\nimport './js/movie-modal-library';\n\nimport './js/queue-library';\nimport './js/about-team-modal';\n\nimport { btnUp } from './js/button-up';\nimport { onWatchedLibrary } from './js/watched-library';\nbtnUp.addEventListener();\n\nonWatchedLibrary();\n"],"names":["$44ef74221443e4f6$var$refs","watchedBtn","document","querySelector","queueBtn","galleryLibrary","async","$44ef74221443e4f6$export$852075710b39decd","classList","add","remove","moviesArray","$44ef74221443e4f6$export$e68c847c0bceb7d5","console","log","Object","keys","length","$44ef74221443e4f6$export$42ffd38884aecdac","markup","$44ef74221443e4f6$export$8b2723ee49351d8","insertAdjacentHTML","markupNothing","$44ef74221443e4f6$export$f03c78e80b131f2e","error","message","cards","map","card","id","title","poster_path","genres","release_date","vote_average","genresForRender","genre","name","reduce","acc","index","arr","join","Date","getFullYear","toFixed","key","serializedState","localStorage","getItem","undefined","JSON","parse","innerHTML","addEventListener","$dIxxU","parcelRequire","$5d201852917eaf5e$var$target","getElementById","$5d201852917eaf5e$var$refs","modalFilmBackdrop","modalFilm","cardFilmLibrary","$5d201852917eaf5e$var$onOpenModalFilm","e","body","$5d201852917eaf5e$var$onCloseModalFilmByBtn","window","$5d201852917eaf5e$var$onCloseEscBtn","$j1lrD","spinner","spin","response","idMovie","default","get","data","$5d201852917eaf5e$var$fetchMovieById","detailsCard","$5d201852917eaf5e$var$getModalMovieCardMarkup","$5d201852917eaf5e$var$render","$5d201852917eaf5e$var$closeModalFilm","$h6c0i","Notify","failure","stop","$5d201852917eaf5e$var$createMovieCard","target","closest","removeEventListener","contains","code","currentTarget","original_title","overview","vote_count","popularity","$9ace1dda588c6489$var$refs","btnUp"],"version":3,"file":"my-library.b3bfe26e.js.map"}