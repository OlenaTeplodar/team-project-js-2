{"mappings":"AAAA,MAAMA,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,SAAUF,SAASC,cAAc,cACjCE,eAAgBH,SAASC,cAAc,uBAGzCH,EAAKC,WAAWK,iBAAiB,SACjC,WACEC,QAAQC,IAAI,SACZ,MAAMC,EAwER,SAA8BC,GAC5B,IACE,MAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,EAG3D,CAFE,MAAOM,GACPV,QAAQU,MAAM,oBAAqBA,EAAMC,QAC3C,CACF,CA/EiCC,CAAqB,gBAEpD,GADAZ,QAAQC,IAAIC,GACPA,GAA2BW,OAAOC,KAAKZ,GAAwBa,OAI7D,CACLtB,EAAKK,eAAekB,UAAY,GAChC,MAAMC,EAKV,SAA0BC,EAAQ,IAChC,OAAOA,EACJC,KAAIC,IACH,MAAMC,GAAEA,EAAEC,MAAEA,EAAKC,YAAEA,EAAWC,OAAEA,EAAMC,aAAEA,GAAiBL,EACnDM,EAA+BF,EAAOL,KAAIQ,GAASA,EAAMC,OAmB5CC,QAAO,CAACC,EAAKH,EAAOI,EAAOC,IAC5CA,EAAIjB,OAAS,EACT,GAAGiB,EAAI,OAAOA,EAAI,aAElBA,EAAIC,KAAK,OAIhB,IA1BC,MAAO,kCAAkCZ,4KAGoCE,4FACDA,kFACVA,WAAqBD,iFAG/DA,0CACCD,KACvBK,GAAoC,eAC5B,IAAIQ,KAAKT,GAAcU,4CAE7B,IAELF,KAAK,GACV,CA1BmBG,CAAiBlC,GAChCT,EAAKK,eAAeuC,mBAAmB,YAAapB,EACtD,KAR4E,CAC1ExB,EAAKK,eAAekB,UAAY,GAChC,MAAMsB,EA4CD,ylBA3CL7C,EAAKK,eAAeuC,mBAAmB,YAAaC,EACtD,CAKF,KCpBqB,CACnBC,GAAI5C,SAASC,cAAc,WAC3B4C,OAEEC,KAAKF,GAAGG,UAAUC,OAAO,cAC3B,EACAC,OAEEH,KAAKF,GAAGG,UAAUG,IAAI,cACxB,EACA9C,mBAEE+C,OAAO/C,iBAAiB,UAAU,MAEhB+C,OAAOC,SAAWpD,SAASqD,gBAAgBC,WAEjD,IAAMR,KAAKD,OAASC,KAAKG,MAAM,IAG3CjD,SAASC,cAAc,WAAWsD,QAAU,KAE1CJ,OAAOK,SAAS,CACdC,IAAK,EACLC,KAAM,EACNC,SAAU,UACZ,CAEJ,ICxBIvD","sources":["src/js/watched-library.js","src/js/button-up.js","src/my-library.js"],"sourcesContent":["const refs = {\n  watchedBtn: document.querySelector('.watched-btn'),\n  queueBtn: document.querySelector('.queue-btn'),\n  galleryLibrary: document.querySelector('.container-library'),\n};\n\nrefs.watchedBtn.addEventListener('click', onWatchedLibrary);\nfunction onWatchedLibrary() {\n  console.log('click');\n  const moviesFromLocalStorage = loadFromLocalStorage('WATCHED-FILM');\n  console.log(moviesFromLocalStorage);\n  if (!moviesFromLocalStorage || !Object.keys(moviesFromLocalStorage).length) {\n    refs.galleryLibrary.innerHTML = '';\n    const markupNothing = createMarkupWhenLocalStorageEmpty();\n    refs.galleryLibrary.insertAdjacentHTML('beforeend', markupNothing);\n  } else {\n    refs.galleryLibrary.innerHTML = '';\n    const markup = createMoviesCard(moviesFromLocalStorage);\n    refs.galleryLibrary.insertAdjacentHTML('beforeend', markup);\n  }\n}\n\nfunction createMoviesCard(cards = []) {\n  return cards\n    .map(card => {\n      const { id, title, poster_path, genres, release_date } = card;\n      const genresForRender = concatGenres(genres.map(genre => genre.name));\n      return `<li class=\"home-card__link\" id=${id}>\n\t\t</div class = \"home-card__thumb\">\n\t\t<picture class=\"home-card__poster\">\n\t\t\t\t  <source media=\"(min-width:1280px)\"  srcset=\"https://image.tmdb.org/t/p/w500${poster_path}\">\n\t\t\t\t  <source media=\"(min-width:768px)\"  srcset=\"https://image.tmdb.org/t/p/w400${poster_path}\">\n\t\t\t\t  <img class=\"home-card__img\" src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${title}\" loading=\"lazy\">\n\t\t\t  </picture>\n\t\t  \n\t\t  <h2 class='card__title'>${title}</h2>\n\t\t  <p class='card__text' id=${id}>${\n        genresForRender ? genresForRender : '---'\n      }</p> | ${new Date(release_date).getFullYear()}</p>\n\t\t</div>\n\t\t  </li>`;\n    })\n    .join('');\n}\nfunction concatGenres(arrOfGenresName) {\n  return arrOfGenresName.reduce((acc, genre, index, arr) => {\n    if (arr.length > 2) {\n      acc = `${arr[0]}, ${arr[1]}, Others`;\n    } else {\n      acc = arr.join(', ');\n    }\n\n    return acc;\n  }, '');\n}\n\nfunction createMarkupWhenLocalStorageEmpty() {\n  return `\n  <li class=\"container-nothing\">\n      <img\n        class=\"container-nothing__img\"\n        src=\"/src/images/empty-hall.jpg\"\n        alt=\"empty-hall\"\n        loading=\"lazy\"\n      />\n      <div class=\"container-nothing__content\">\n        <h2 class=\"container-nothing__title\">Your library is empty!</h2>\n        <p class=\"container-nothing__text\">\n          <a\n            title=\"Link to main page\"\n            class=\"container-nothing__link\"\n            href=\"/src/index.html\"\n            >GO TO</a\n          >\n          movie selection.\n        </p>\n      </div>\n    </li>\n    `;\n}\n\nfunction loadFromLocalStorage(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n}\n\n// function loadWatchedMoviesFromLocalStorage() {\n//   const moviesFromLocalStorage = loadFromLocalStorage('WATCHED-FILM');\n\n//   if (!moviesFromLocalStorage || !Object.keys(moviesFromLocalStorage).length) {\n//     const markupNothing = createMarkupWhenLocalStorageEmpty();\n//     refs.galleryLibrary.innerHTML = markupNothing;\n//   } else {\n//     onWatchedLibrary();\n//   }\n// }\n","export const btnUp = {\n  el: document.querySelector('.btn-up'),\n  show() {\n    // удалим у кнопки класс btn-up_hide\n    this.el.classList.remove('btn-up_hide');\n  },\n  hide() {\n    // добавим к кнопке класс btn-up_hide\n    this.el.classList.add('btn-up_hide');\n  },\n  addEventListener() {\n    // при прокрутке содержимого страницы\n    window.addEventListener('scroll', () => {\n      // определяем величину прокрутки\n      const scrollY = window.scrollY || document.documentElement.scrollTop;\n      // если страница прокручена больше чем на 400px, то делаем кнопку видимой, иначе скрываем\n      scrollY > 400 ? this.show() : this.hide();\n    });\n    // при нажатии на кнопку .btn-up\n    document.querySelector('.btn-up').onclick = () => {\n      // переместим в начало страницы\n      window.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth',\n      });\n    };\n  },\n};\n","import './js/watched-library';\nimport { btnUp } from './js/button-up';\n\nbtnUp.addEventListener();\n"],"names":["$71fb53b734638d70$var$refs","watchedBtn","document","querySelector","queueBtn","galleryLibrary","addEventListener","console","log","moviesFromLocalStorage","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","message","$71fb53b734638d70$var$loadFromLocalStorage","Object","keys","length","innerHTML","markup","cards","map","card","id","title","poster_path","genres","release_date","genresForRender","genre","name","reduce","acc","index","arr","join","Date","getFullYear","$71fb53b734638d70$var$createMoviesCard","insertAdjacentHTML","markupNothing","el","show","this","classList","remove","hide","add","window","scrollY","documentElement","scrollTop","onclick","scrollTo","top","left","behavior"],"version":3,"file":"my-library.b8b3b1af.js.map"}